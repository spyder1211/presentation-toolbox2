# Dify ナレッジベース アップロード用ファイルリスト

## アップロード対象ファイル

### 📋 必須アップロードファイル（優先度順）

#### 1. 極めて高優先度ファイル（7ファイル）- 必須
```
01_極めて高優先度/ゴミ・リサイクル/ごみ出し検索ナビ.md
01_極めて高優先度/ゴミ・リサイクル/ゴミ収集カレンダー.md
01_極めて高優先度/防災・緊急情報/防災情報総合ガイド.md
01_極めて高優先度/防災・緊急情報/避難所避難場所一覧.md
01_極めて高優先度/手続き案内/手続き検索ナビ総合ガイド.md
01_極めて高優先度/手続き案内/転入手続きガイド.md
01_極めて高優先度/手続き案内/転出手続きガイド.md
```

#### 2. 高優先度ファイル（2ファイル）- 必須
```
02_高優先度/証明書・申請書/申請書ダウンロードガイド.md
02_高優先度/子育て支援/子育て支援総合ガイド.md
```

#### 3. インデックス・ナビゲーションファイル（3ファイル）- 推奨
```
00_INDEX.md
01_極めて高優先度/README.md
02_高優先度/README.md
```

---

## アップロード方法別手順

### 方法1: バッチアップロード（推奨）

1. **ファイル選択順序**
   ```
   1. 00_INDEX.md（総合インデックス）
   2. 01_極めて高優先度/ 配下の全7ファイル
   3. 02_高優先度/ 配下の全2ファイル  
   4. 各カテゴリーのREADME.md（2ファイル）
   ```

2. **アップロード設定**
   - ファイル形式: Markdown (.md)
   - 文字エンコーディング: UTF-8
   - 言語設定: 日本語

### 方法2: 段階的アップロード

#### Phase 1: 基本機能（最優先）
```
ごみ出し検索ナビ.md
ゴミ収集カレンダー.md
防災情報総合ガイド.md
避難所避難場所一覧.md
```
→ **基本的な日常問い合わせと緊急時対応**

#### Phase 2: 手続き支援
```
手続き検索ナビ総合ガイド.md
転入手続きガイド.md
転出手続きガイド.md
申請書ダウンロードガイド.md
```
→ **ライフイベント・行政手続き対応**

#### Phase 3: 専門分野・完全対応
```
子育て支援総合ガイド.md
00_INDEX.md
各README.md（2ファイル）
```
→ **包括的サービス提供**

---

## ファイル詳細情報

### 優先度・重要度マトリクス

| ファイル名 | ファイルサイズ | 優先度 | 問い合わせ頻度 | 緊急性 |
|------------|---------------|--------|----------------|--------|
| ごみ出し検索ナビ.md | 2.8KB | ⭐⭐⭐ | 極めて高 | 低 |
| ゴミ収集カレンダー.md | 5.5KB | ⭐⭐⭐ | 極めて高 | 低 |
| 防災情報総合ガイド.md | 6.3KB | ⭐⭐⭐ | 緊急時高 | 極めて高 |
| 避難所避難場所一覧.md | 7.9KB | ⭐⭐⭐ | 緊急時高 | 極めて高 |
| 手続き検索ナビ総合ガイド.md | 6.7KB | ⭐⭐⭐ | 高 | 中 |
| 転入手続きガイド.md | 9.1KB | ⭐⭐⭐ | 高 | 中 |
| 転出手続きガイド.md | 11.1KB | ⭐⭐⭐ | 高 | 中 |
| 申請書ダウンロードガイド.md | 7.7KB | ⭐⭐ | 中～高 | 低 |
| 子育て支援総合ガイド.md | 12.5KB | ⭐⭐ | 中（対象限定） | 低 |

---

## アップロード前チェックリスト

### ✅ 必須確認事項
- [ ] 全ファイルのUTF-8エンコーディング確認
- [ ] リンク切れの有無確認
- [ ] 都留市の最新情報との整合性確認
- [ ] 個人情報の含有確認（含まれていないこと）
- [ ] ファイルサイズがDify制限内であることの確認

### ✅ 品質確認事項  
- [ ] メタデータの完整性
- [ ] Q&Aセクションの網羅性
- [ ] クロスリファレンスリンクの動作確認
- [ ] 専門用語・略語の統一性

### ✅ アップロード後確認事項
- [ ] インデックス作成の完了確認
- [ ] 検索機能の動作テスト
- [ ] チャンク分割の適切性確認
- [ ] 応答品質の初期チェック

---

## 除外ファイル・フォルダ

### アップロード対象外
```
docs/                          (作業ログ・手順書)
都留市HP_Dify取込作業手順書.md   (プロジェクト文書)
DIFY_METADATA.md               (設定用メタデータ)
```

**理由**: これらは作業用・設定用ファイルで、市民向けQ&A応答には不要

---

## ファイルサイズ・パフォーマンス最適化

### 現在のファイルサイズ分布
- **3KB未満**: 1ファイル（ごみ出し検索ナビ）
- **3-10KB**: 6ファイル（標準的なサイズ）
- **10KB超**: 2ファイル（転出手続き、子育て支援）

### Dify推奨設定との適合性
- ✅ 全ファイルが推奨範囲内（3-15KB）
- ✅ 適切な見出し構造でチャンク分割に対応
- ✅ Q&Aセクションが独立したチャンクとして処理可能

---

## 想定される利用パターンとファイル優先度

### 1. 日常的問い合わせ（平日昼間・夜間）
**対応ファイル**: ゴミ関連2ファイル、申請書ダウンロード
**期待される削減効果**: 窓口問い合わせの30-40%

### 2. ライフイベント時問い合わせ（随時）  
**対応ファイル**: 手続き関連3ファイル、子育て支援
**期待される削減効果**: 手続き相談の50-60%

### 3. 緊急時問い合わせ（災害時）
**対応ファイル**: 防災関連2ファイル
**期待される削減効果**: 緊急時問い合わせの70-80%

---

## トラブルシューティング・注意事項

### よくある問題と対処法

1. **ファイルサイズエラー**
   - 現在の最大ファイル（12.5KB）は問題なし
   - Dify制限に抵触した場合は分割を検討

2. **文字化け・エンコーディングエラー**
   - 全ファイルUTF-8で作成済み
   - BOM無しUTF-8を確認

3. **リンクエラー**
   - 相対パス使用のため、Dify内では無効化される
   - 内容で関連ページを示唆する記述で対応済み

4. **検索精度の問題**
   - カテゴリー別キーワード・タグ設定をDIFY_METADATA.mdで提供
   - 重み付け設定で優先度調整可能

---

## 次のステップ

1. **アップロード実行**
   - 推奨: バッチアップロード方式
   - 設定: DIFY_METADATA.mdの推奨値使用

2. **初期テスト**  
   - テスト用サンプル質問での動作確認
   - 応答品質・速度の評価

3. **運用準備**
   - チャットボット設定の調整
   - 定期更新プロセスの確立

---

**作成日**: 2025-09-01  
**対象Difyバージョン**: 最新版  
**総ファイルサイズ**: 約94KB（圧縮後推定20-30KB）